<!DOCTYPE html> 
<html lang="en">
	
<head>
		<meta charset="utf-8">
		<title>Clever Care - Doctor Registration</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
		
		<!-- Favicons -->
		<link href="assets/img/favicon.png" rel="icon">
		
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="assets/css/bootstrap.min.css">
		
		<!-- Fontawesome CSS -->
		<link rel="stylesheet" href="assets/plugins/fontawesome/css/fontawesome.min.css">
		<link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">
		
		<!-- Main CSS -->
		<link rel="stylesheet" href="assets/css/style.css">
	</head>
	<body class="account-page">
		<!-- Main Wrapper -->
		<div class="main-wrapper">
			<!-- Header -->
			<header class="header">
				<nav class="navbar navbar-expand-lg header-nav">
					<div class="navbar-header">
						<a id="mobile_btn" href="javascript:void(0);">
							<span class="bar-icon">
								<span></span>
								<span></span>
								<span></span>
							</span>
						</a>
						<a href="index.html" class="navbar-brand logo">
							<img src="assets/img/logo.png" class="img-fluid" alt="Logo">
						</a>
					</div>
					<div class="main-menu-wrapper">
						<div class="menu-header">
							<a href="index.html" class="menu-logo">
								<img src="assets/img/logo.png" class="img-fluid" alt="Logo">
							</a>
							<a id="menu_close" class="menu-close" href="javascript:void(0);">
								<i class="fas fa-times"></i>
							</a>
						</div>
						<ul class="main-nav">
							<li><a href="index.html">Home</a></li>
							<li><a href="login.html">Login</a></li>
							<li class="active"><a href="doctor-register.html">Register</a></li>
						</ul>
					</div>
				</nav>
			</header>
			<!-- /Header -->
			
			<!-- Page Content -->
			<div class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-8 offset-md-2">
							<!-- Register Content -->
							<div class="account-content">
								<div class="row align-items-center justify-content-center">
									<div class="col-md-7 col-lg-6 login-left">
										<img src="assets/img/login-banner.png" class="img-fluid" alt="Doctor Register">	
									</div>
									<div class="col-md-12 col-lg-6 login-right">
										<div class="login-header">
											<h3>Doctor Register <a href="register.html">Are you a Patient?</a></h3>
										</div>
										
										<!-- Register Form -->
										<form id="doctorRegisterForm">
											<div class="form-group form-focus">
												<input type="text" class="form-control floating" id="name" required>
												<label class="focus-label">Name</label>
											</div>
											<div class="form-group form-focus">
												<input type="email" class="form-control floating" id="email" required>
												<label class="focus-label">Email</label>
											</div>
											<div class="form-group form-focus">
												<input type="password" class="form-control floating" id="password" required>
												<label class="focus-label">Create Password</label>
											</div>
											<div class="form-group form-focus">
												<input type="password" class="form-control floating" id="confirmPassword" required>
												<label class="focus-label">Confirm Password</label>
											</div>
											<div class="form-group form-focus">
												<input type="tel" class="form-control floating" id="phone" required>
												<label class="focus-label">Phone Number</label>
											</div>
											<div class="form-group form-focus">
												<textarea class="form-control floating" id="address" required></textarea>
												<label class="focus-label">Address</label>
											</div>
											<div class="form-group form-focus">
												<input type="text" class="form-control floating" id="specialization" required>
												<label class="focus-label">Specialization</label>
											</div>
											<div class="form-group form-focus">
												<input type="number" class="form-control floating" id="experience" required>
												<label class="focus-label">Years of Experience</label>
											</div>
											<div class="form-group form-focus">
												<input type="text" class="form-control floating" id="education" required>
												<label class="focus-label">Education</label>
											</div>
											<div class="form-group form-focus">
												<input type="number" class="form-control floating" id="fees" required>
												<label class="focus-label">Consultation Fees</label>
											</div>
											<div class="text-right">
												<a class="forgot-link" href="login.html">Already have an account?</a>
											</div>
											<button class="btn btn-primary btn-block btn-lg login-btn" type="submit">Signup</button>
										</form>
										<!-- /Register Form -->
									</div>
								</div>
							</div>
							<!-- /Register Content -->
						</div>
					</div>
				</div>
			</div>
			<!-- /Page Content -->
   
			<!-- Footer -->
			<footer class="footer">
				<div class="footer-top">
					<div class="container-fluid">
						<div class="row">
							<div class="col-lg-3 col-md-6">
								<div class="footer-widget footer-about">
									<div class="footer-logo">
										<img src="assets/img/footer-logo.png" alt="logo">
									</div>
									<div class="footer-about-content">
										<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</footer>
			<!-- /Footer -->
		</div>
		<!-- /Main Wrapper -->
	  
		<!-- jQuery -->
		<script src="assets/js/jquery.min.js"></script>
		
		<!-- Bootstrap Core JS -->
		<script src="assets/js/popper.min.js"></script>
		<script src="assets/js/bootstrap.min.js"></script>
		
		<!-- Custom JS -->
		<script src="assets/js/script.js"></script>
		
		<!-- Doctor Register JS -->
		<script>
			document.getElementById('doctorRegisterForm').addEventListener('submit', async (e) => {
				e.preventDefault();
				
				const password = document.getElementById('password').value;
				const confirmPassword = document.getElementById('confirmPassword').value;
				
				if (password !== confirmPassword) {
					alert('Passwords do not match');
					return;
				}

				const formData = {
					name: document.getElementById('name').value,
					email: document.getElementById('email').value,
					password: password,
					phone: document.getElementById('phone').value,
					address: document.getElementById('address').value,
					role: 'doctor',
					// Doctor specific fields
					specialization: document.getElementById('specialization').value,
					experience: document.getElementById('experience').value,
					education: document.getElementById('education').value,
					fees: document.getElementById('fees').value
				};

				try {
					const response = await fetch('http://localhost:5000/api/auth/register', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json'
						},
						body: JSON.stringify(formData)
					});

					const data = await response.json();

					if (response.ok) {
						// Store the token and user data
						localStorage.setItem('token', data.token);
						localStorage.setItem('user', JSON.stringify(data.user));
						
						// Show success message
						alert('Registration successful! Redirecting to doctor dashboard...');
						
						// Redirect to doctor dashboard
						window.location.href = 'doctor-dashboard.html';
					} else {
						// Show error message
						if (data.errors) {
							alert(data.errors.map(err => err.msg).join('\n'));
						} else {
							alert(data.message || 'Registration failed');
						}
					}
				} catch (error) {
					console.error('Error:', error);
					alert('An error occurred during registration. Please try again.');
				}
			});
		</script>
	</body>
</html>